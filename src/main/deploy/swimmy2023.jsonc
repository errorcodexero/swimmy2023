{
    "system": {
        "messages": {
            // Robot framework settings
            "actions": true,
            "pathmanager": false,
            "xerorobot": false,
            "simulator": false,
            "limelight-edgar" : false,
            "oibuttons" : false,

            // Special settings
            "pathfollowing": false,

            // Subsystem related messages
            "vision": false,
            "swerve" : false,
            "swimmy2023oi" : false,
            "Swimmy2023RobotSubsystem" : true,
            "limelight" : false,
            "arm-motor-lower" : false,
            "arm-motor-upper" : false,
            "gpm" : true
        },
        "verbose": {
            "swerve" : true,
            "arm-motor-upper" : false,
            "grabber-motor-grab" : true
        },
        "plotting": {
            "enabled" : true,
            "version" : 3
        },
        "pneumatics": {
            "type": "REVPH",
            "min-pressure" : 100.0,
            "max-pressure" : 120.0
        }
    },
    "subsystems": {
        "Swimmy2023RobotSubsystem" : {
            "april-tag-action-threshold" : 2.0,
            "tape-align-margin" : 0.1016,
            "drive-forward-distance" : 0.1524
        },
        "arm" : {
            "collect" : {
                "extend-shelf" : {
                    "1" : {
                        "lower" : 0,
                        "upper" : 55000
                    },
                    "2" : {
                        "lower" : 70000,
                        "upper" : 135000
                    }
                },
                "retract-shelf" : {
                    "1" : {
                        "lower" : 70000,
                        "upper" : 160000
                    },
                    "2" : {
                        "lower" : 60000,
                        "upper" : 160000
                    },
                    "3" : {
                        "lower" : 0,
                        "upper" : 0                        
                    }
                },
                "extend-ground" : {
                    "1" : {
                        "lower" : 0,
                        "upper" : 44890
                    },
                    "2" : {
                        "lower" : 104083,
                        "upper" : 44890
                    }
                },
                "retract-ground" : {
                    "1" : {
                        "lower" : 0,
                        "upper" : 44890
                    },
                    "2" : {
                        "lower" : 0,
                        "upper" : 20000

                    }
                }
            },
            "place" : {
                "top" : {
                    "cone" : {
                        "extend" : {
                            "1" : {
                                "lower" : 98642,
                                "upper" : 211215
                            }
                        },
                        "retract" : {
                            "1" : {
                                "lower" : 40000,
                                "upper" : 190000                       
                            },
                            "2" : {
                                "lower" : 0,
                                "upper" : 0                        
                            }
                        }
                    },
                    "cube" : {
                        "extend" : {
                            "1" : {
                                "lower" : 70000,
                                "upper" : 130000
                            }
                        },
                        "retract" : {
                            "1" : {
                                "lower" : 70000,
                                "upper" : 160000
                            },
                            "2" : {
                                "lower" : 60000,
                                "upper" : 160000
                            },
                            "3" : {
                                "lower" : 0,
                                "upper" : 0                        
                            }                            
                        }
                    }
                },
                "middle" : {
                    "cone" : {
                        "extend" : {
                            "1" : {
                                "lower" : 52155,
                                "upper" : 108000
                            }
                        },
                        "retract" : {
                            "1" : {
                                "lower" : 0,
                                "upper" : 0                        
                            }
                        }
                    },
                    "cube" : {
                        "extend" : {
                            "1" : {
                                "lower" : 70000,
                                "upper" : 130000
                            }
                        },
                        "retract" : {
                            "1" : {
                                "lower" : 70000,
                                "upper" : 160000
                            },
                            "2" : {
                                "lower" : 60000,
                                "upper" : 160000
                            },
                            "3" : {
                                "lower" : 0,
                                "upper" : 0                        
                            }                            
                        }
                    }
                },
                "bottom" : {
                    "cone" : {
                        "extend" : {
                            "1" : {
                                "lower" : 58492,
                                "upper" : 20353
                            }
                        },
                        "retract" : {
                            "1" : {
                                "lower" : 0,
                                "upper" : 0                        
                            }
                        }
                    },
                    "cube" : {
                        "extend" : {
                            "1" : {
                                "lower" : 70000,
                                "upper" : 130000
                            }
                        },
                        "retract" : {
                            "1" : {
                                "lower" : 70000,
                                "upper" : 160000
                            },
                            "2" : {
                                "lower" : 60000,
                                "upper" : 160000
                            },
                            "3" : {
                                "lower" : 0,
                                "upper" : 0                        
                            }                            
                        }
                    }
                }
            }
        },
        "arm-motor-lower": {
            "hw": {
                "motors": {
                    "1": {
                        "type": "talon-fx",
                        "canid": 1,
                        "bus" : "",
                        "inverted" : true,
                        "neutral_mode": "coast"
                    }
                },
                "encoder": {
                    "type": "motor",
                    "m": 1,
                    "b": 0,
                    "units" : "ticks"
                }
            },
            "hold": {
                "kp": 0.000006,
                "ki": 0,
                "kd": 0,
                "kf": 0,
                "min": -0.30,
                "max": 0.30,
                "imax": 0
            },
            "goto": {
                "threshold": 100,
                "maxd": -100000,
                "maxa": 100000,
                "maxv": 100000
            },
            "follower": {
                "up" : {
                    "kp": 0.00002,
                    "ka": 0.0,
                    "ki": 0.0,
                    "kd": 0.0,
                    "kv": 5.67914E-06
                },
                "down" : {
                    "kp": 0.00002,
                    "ka": 0.0,
                    "ki": 0.0,
                    "kd": 0.0,
                    "kv": 5.67914E-06
                }
            }
        },
        "arm-motor-upper": {
            "hw": {
                "motors": {
                    "1": {
                        "type": "talon-fx",
                        "canid": 2,
                        "bus" : "",
                        "inverted" : false,
                        "neutral_mode": "coast"
                    }
                },
                "encoder": {
                    "type": "motor",
                    "m": 1,
                    "b": 0,
                    "units" : "ticks"
                }
            },
            "hold": {
                "kp": 0.0001,
                "ki": 0,
                "kd": 0,
                "kf": 0,
                "min": -0.30,
                "max": 0.30,
                "imax": 0
            },
            "goto": {
                "threshold": 100,
                "maxd": -300000,
                "maxa": 300000,
                "maxv": 300000
            },
            "follower": {
                "up" : {
                    "kp": 0.00002,
                    "ka": 0.0,
                    "ki": 0.0,
                    "kd": 0.0,
                    "kv": 5.65099E-06
                },
                "down" : {
                    "kp": 0.00002,
                    "ka": 0.0,
                    "ki": 0.0,
                    "kd": 0.0,
                    "kv": 5.65099E-06
                }
            }
        },
        "grabber" : {
            "hw" : {
                "sensor" : {
                    "upper" : 0,
                    "lower" : 1
                }
            },
            "open" : {
                //
                // The motor power to run the grabber motors while collecting a game piece
                //
                "power" : 2.0
            },
            "close" : {
                //
                // The delay between closing the grabber and stopping the motors when grabbing
                // a game piece
                //
                "delay" : 2.0,

                "cone-position" : 990,
                
                "cube-position" : 1100
            }
        },
        "grabber-motor-spin": {
            "hw": {
                "motors": {
                    "1": {
                        "type": "sparkmax-brushless",
                        "canid": 4,
                        "bus" : "",
                        "inverted" : true,
                        "neutral_mode": "brake"
                    }
                },
                "encoder": {
                    "type": "motor",
                    "m": 1,
                    "b": 0,
                    "units" : "ticks"
                }
            },
            "power" : {
                "spin" : 0.4
            }
        },
        "grabber-motor-grab": {
            "hw": {
                "motors": {
                    "1": {
                        "type": "sparkmax-brushless",
                        "canid": 3,
                        "bus" : "",
                        "inverted" : true,
                        "neutral_mode": "coast"
                    }
                },
                "encoder": {
                    "type": "motor",
                    "m": 1,
                    "b": 0,
                    "units" : "ticks"
                }
            },

            "hold": {
                "kp": 0.004,
                "ki": 0,
                "kd": 0,
                "kf": 0,
                "min": -1.0,
                "max": 0.5,
                "imax": 0
            },
            "positions" : {
                "open" : 500
            }
        },
        "swimmy2023oi": {
            "swerve_gamepad": {
                "index": 0,
                "angle": {
                    "maximum": 180,
                    "deadband": 0.05
                },
                "position": {
                    "maximum": 4.5,
                    "deadband": {
                        "x": 0.1,
                        "y": 0.1
                    }
                },
                "power": 1.5
            },
            "panel" : {
                "index" : 2,
                "outputs" : {
                    "state1" : 0,
                    "state2" : 1
                },
                "gadgets" : {
                    "collect_v_place" : 6,
                    "auto_v_manual" : 5,
                    "lock" : 4,
                    "abort" : 1,
                    "turtle" : 2,
                    "action" : 3,
                    "drop" : 15,
                    "cone_v_cube" : {
                        "1" : 9,
                        "2" : 10
                    },

                    "apriltag" : {
                        "1" : 7,
                        "2" : 8
                    },
                    "slot" : {
                        "1" : 11,
                        "2" : 12
                    },
                    "height" : {
                        "1" : 13,
                        "2" : 14
                    }

                }
            }
        },
        "swerve": {
            //
            // This section describes the hardware that implements the swerve drive
            //
            "hw": {
                "bus" : "DriveBase",
                "gyro": {
                    "type": "navx",
                    "start-time": 3.0
                },
                "fl": {
                    "steer": {
                        "canid": 11
                    },
                    "drive": {
                        "canid": 12
                    },
                    "encoder": {
                        "canid": 13,
                        "offset": {
                            "PRACTICE" : -285.47,
                            "COMPETITION" : -218.85
                        }
                    }
                },
                "fr": {
                    "steer": {
                        "canid": 21
                    },
                    "drive": {
                        "canid": 22
                    },
                    "encoder": {
                        "canid": 23,
                        "offset": {
                            "PRACTICE" : -259.89,
                            "COMPETITION" : -295.5
                        }
                    }
                },
                "bl": {
                    "steer": {
                        "canid": 41
                    },
                    "drive": {
                        "canid": 42
                    },
                    "encoder": {
                        "canid": 43,
                        "offset": {
                            "PRACTICE" : -79.36,
                            "COMPETITION" : -146.1
                        }
                    }
                },
                "br": {
                    "steer": {
                        "canid": 31
                    },
                    "drive": {
                        "canid": 32
                    },
                    "encoder": {
                        "canid": 33,
                        "offset": {
                            "PRACTICE" : -314.12,
                            "COMPETITION" : -77.96
                        }
                    }
                }
            },
            
            //
            // This section describes how the vision integration with the drive base behaves
            //
            "estimator" : {
                "advanced-rejection" : false,                   // If true, the advanced rejection of vision samples is used, see the code for more details
                "vision-reject-threshold" : 1.0,                // Reject vision samples that are more than this distance from the current robot pose
                "single-threshold" : 50.0,                      // When we see a single target, and we are greater than this distance, use the single-far std devs
                                                                // Otherwise use the single-near std devs
                "multi-threshold" : 4.0,                        // When we see multiple targets, and we are greater than this distance, use the multi-far std devs
                                                                // Otherwise use the multi-near std devs
                "single-tag-ignore-reject-threshold" : 2.0,     // If we see a single tag and the pose from the tag is greater than the vision-reject-threshold from the
                                                                // current robot pose, we normally reject the vision sample.  However, if the distance to the tag is
                                                                // within this distance, we apply it anyway assuming that the odometry is just way off.

                "odometry" : {                                  // The std devs for the odometry
                    "x" : 0.9,
                    "y" : 0.9,
                    "heading" : 0.9
                },
                //
                // Jack in the bot - Odometry (0.02, 0.02, 0.02), Vision (0.1, 0.1, 0.01).
                //
                "vision" : {
                    "single-far" : {
                        "x" : 0.9,
                        "y" : 0.9,
                        "heading" : 0.1
                    },
                    "single-near" : {
                        "x" : 0.1,
                        "y" : 0.1,
                        "heading" : 0.1
                    },
                    "multi-far" : {
                        "x" : 0.1,
                        "y" : 0.1,
                        "heading" : 0.1
                    },
                    "multi-near" : {
                        "x" : 0.1,
                        "y" : 0.1,
                        "heading" : 0.1
                    }
                }
            },
            //
            // This section is the PID controllers for the holonomic drive controller (path following)
            //
            "pid": {                        
                "xctrl": {
                    "kp": 6.0,
                    "ki": 0,
                    "kd": 0
                },
                "yctrl": {
                    "kp": 6.0,
                    "ki": 0,
                    "kd": 0
                },
                "rotation": {
                    "kp": 11.0,
                    "ki": 0,
                    "kd": 0
                }
            },

            //
            // This section sets the tolerances for path following
            //
            "holonomic-path-following": {
                "xy-tolerance": 0.05,
                "angle-tolerance": 2.0
            },

            //
            // This section is the pid controller for the low level modules, specifically the module velocity since the
            // angle is managed in the motor controller and initialize by the low level code.
            //
            "pids": {
                "fl": {
                    "kp":  {
                        "PRACTICE" : 0.0,
                        "COMPETITION" : 0.0
                    },
                    "ki": 0.0,
                    "kd": 0.0,
                    "kf" : {
                        "PRACTICE" : 0.22272211,
                        "COMPETITION" : 0.224895986
                    },
                    "min": -1.0,
                    "max": 1.0,
                    "imax": 0.0
                },
                "fr": {
                    "kp":  {
                        "PRACTICE" : 0.0,
                        "COMPETITION" : 0.0
                    },
                    "ki": 0.0,
                    "kd": 0.0,
                    "kf" : {
                        "PRACTICE" : 0.222039656,
                        "COMPETITION" : 0.223224251
                    },
                    "min": -1.0,
                    "max": 1.0,
                    "imax": 0.0
                },
                "bl": {
                    "kp":  {
                        "PRACTICE" : 0.0,
                        "COMPETITION" : 0.0
                    },
                    "ki": 0.0,
                    "kd": 0.0,
                    "kf" : {
                        "PRACTICE" : 0.22181802,
                        "COMPETITION" : 0.231975503
                    },
                    "min": -1.0,
                    "max": 1.0,
                    "imax": 0.0
                },
                "br": {
                    "kp":  {
                        "PRACTICE" : 0.0,
                        "COMPETITION" : 0.0
                    },
                    "ki": 0.0,
                    "kd": 0.0,
                    "kf" : {
                        "PRACTICE" : 0.222286438,
                        "COMPETITION" : 0.224366166
                    },
                    "min": -1.0,
                    "max": 1.0,
                    "imax": 0.0
                }
            },

            //
            // This section is a PID controller for rotationally aligning the robot with a vision target
            //
            "align-pid" : {
                "kp" : 0.0,
                "ki" : 0.0,
                "kd" : 0.0,
                "kf" : 0.0,
                "max" : 1.5707963268,          // Radians per second (90)
                "min" : 1.5707963268,          // Radians per second (90)
                "imax" : 0.0
            },

                        //
            // This section is a PID controller for rotationally aligning the robot with a vision target
            //
            "balance-pid" : {
                "kp" : 0.0,
                "ki" : 0.0,
                "kd" : 0.0,
                "kf" : 0.0,
                "max" : 0.5,          // Meters Per Second
                "min" : 0.5,          // Meters Per Second
                "imax" : 0.0
            },

            //
            // This section descrdibes the physical characteristics of the robot
            //
            "physical": {
                "width": 0.5715, // meters
                "length": 0.5842, // meters
                "path" : {
                    "maxv" : 0.5,
                    "maxa" : 0.5
                },
                "max-angular-speed": 100,
                "max-angular-accel": 100
            },

            //
            // This section describes electrical characteristics of the robot
            //
            "electrical": {
                "max-voltage": 12.0,
                "nominal-voltage": 11.0,
                "steer-current-limit": 10.0,
                "drive-current-limit": 30.0
            }
        },
        "gpm" : {
            "place-delay" : 1.0
        }
    },
    "automodes" : {
        "center" : {
            "before-collect-delay" : 3.0,
            "collect-delay" : 1.0
        }
    },
    "testmode": {
        "enabled": true,
        "which": 97,
        "0": {
            "angle": 0.0,
            "power": 0.2
        },
        "1": {
            "angle": 0.0,
            "power": 0.2,
            "duration": 1
        },
        "2": {
            "angle": 0.0,
            "speed": 0.5
        },
        "3": {
            "angle": 0.0,
            "speed": 1.0,
            "duration": 3.0
        },
        "4": {
            "name": "Sample-Path2m2m"
        },
        "5": {
            "angle": 0.0,
            "power": 0.1,
            "duration": 10
        },
        "10" : {
            "power" : 0.5,
            "duration" : 0.8,
            "height" : 20000
        },
        "11" : {
            "power" : 0.5,
            "duration" : 1.0
        },
        "12" : {
            "velocity" : 1000
        },
        "13" : {
            "velocity" : 5000
        },
        "14" : {
            "lower" : 100000,
            "upper" : 150000
        },
        "15" : {
            "target" : 36000
        },
        "16" : {
            "lower1" : 50000,
            "upper1" : 100000,
            "lower2" : 108149,
            "upper2" : 215356
        },
        "18" : {
            "upper" : 90000,
            "lower" : 100000
        },
        "20" : {
            "power" : 0.1,
            "duration" : 1.0          
        },
        "21" : {
            "power" : 0.6,
            "duration" : 5.0            
        },
        "22" : {
            "position" : 500
        },
        "23" : {
            "position" : 500
        },
        "29" : {
            "power" : 0.4,
            "duration" : 3.0
        },
        "97" : {
            "delay" : 2.0
        },
        "98" : {
            "initx" : 3.2,
            "inity" : 4.3,
            "initangle" : 180.0,
            "delay" : 0.4,
            "x" : 1.873,
            "y" : 5.05,
            "angle" : 180.0
        },
        "99" : {
            "initx" : 3.0,
            "inity" : 6.5,
            "initangle" : 160.0,
            "delay" : 5.0,
            "x" : 1.66195,
            "y" : 7.609796,
            "angle" : 180.0
        }
    }
}
